<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BugIt插件 | Lyrebird</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="面向移动应用的插件式测试工作台">
    
    <link rel="preload" href="/lyrebird/assets/css/0.styles.7644c187.css" as="style"><link rel="preload" href="/lyrebird/assets/js/app.e12009e3.js" as="script"><link rel="preload" href="/lyrebird/assets/js/2.d6802a1a.js" as="script"><link rel="preload" href="/lyrebird/assets/js/4.987bc5f7.js" as="script"><link rel="prefetch" href="/lyrebird/assets/js/10.7d94225f.js"><link rel="prefetch" href="/lyrebird/assets/js/11.d60fee1f.js"><link rel="prefetch" href="/lyrebird/assets/js/12.b09bcb0c.js"><link rel="prefetch" href="/lyrebird/assets/js/13.09e273f9.js"><link rel="prefetch" href="/lyrebird/assets/js/14.b54c2c5f.js"><link rel="prefetch" href="/lyrebird/assets/js/15.eb423036.js"><link rel="prefetch" href="/lyrebird/assets/js/16.fac0b64e.js"><link rel="prefetch" href="/lyrebird/assets/js/17.a4764f74.js"><link rel="prefetch" href="/lyrebird/assets/js/18.e2b2af76.js"><link rel="prefetch" href="/lyrebird/assets/js/19.4f556cd7.js"><link rel="prefetch" href="/lyrebird/assets/js/20.65069c37.js"><link rel="prefetch" href="/lyrebird/assets/js/21.a5a74a70.js"><link rel="prefetch" href="/lyrebird/assets/js/22.cf5ddfd2.js"><link rel="prefetch" href="/lyrebird/assets/js/23.395dda57.js"><link rel="prefetch" href="/lyrebird/assets/js/24.510a2c51.js"><link rel="prefetch" href="/lyrebird/assets/js/25.5034684a.js"><link rel="prefetch" href="/lyrebird/assets/js/26.f95f5fe6.js"><link rel="prefetch" href="/lyrebird/assets/js/27.6c6a3e9b.js"><link rel="prefetch" href="/lyrebird/assets/js/28.abc2a2e4.js"><link rel="prefetch" href="/lyrebird/assets/js/29.6655cb15.js"><link rel="prefetch" href="/lyrebird/assets/js/3.1f956e89.js"><link rel="prefetch" href="/lyrebird/assets/js/30.2b741a9f.js"><link rel="prefetch" href="/lyrebird/assets/js/31.cd2a4cef.js"><link rel="prefetch" href="/lyrebird/assets/js/5.823f3d2b.js"><link rel="prefetch" href="/lyrebird/assets/js/6.dc6cb0d9.js"><link rel="prefetch" href="/lyrebird/assets/js/7.f0c45673.js"><link rel="prefetch" href="/lyrebird/assets/js/8.bcf3b602.js"><link rel="prefetch" href="/lyrebird/assets/js/9.f343890a.js">
    <link rel="stylesheet" href="/lyrebird/assets/css/0.styles.7644c187.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lyrebird/" class="home-link router-link-active"><!----> <span class="site-name">Lyrebird</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lyrebird/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/lyrebird/checker/" class="nav-link">
  检查器
</a></div><div class="nav-item"><a href="/lyrebird/plugins/" class="nav-link router-link-active">
  插件
</a></div><div class="nav-item"><a href="/lyrebird/advance/" class="nav-link">
  高级
</a></div><div class="nav-item"><a href="/lyrebird/develop/" class="nav-link">
  开发者指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码仓库" class="dropdown-title"><span class="title">代码仓库</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码仓库" class="mobile-dropdown-title"><span class="title">代码仓库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lyrebird
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird-ios" target="_blank" rel="noopener noreferrer" class="nav-link external">
  iOS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird-android" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Android
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird-api-coverage" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ApiCoverage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird-tracking" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Tracking
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lyrebird/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/lyrebird/checker/" class="nav-link">
  检查器
</a></div><div class="nav-item"><a href="/lyrebird/plugins/" class="nav-link router-link-active">
  插件
</a></div><div class="nav-item"><a href="/lyrebird/advance/" class="nav-link">
  高级
</a></div><div class="nav-item"><a href="/lyrebird/develop/" class="nav-link">
  开发者指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码仓库" class="dropdown-title"><span class="title">代码仓库</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码仓库" class="mobile-dropdown-title"><span class="title">代码仓库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lyrebird
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird-ios" target="_blank" rel="noopener noreferrer" class="nav-link external">
  iOS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird-android" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Android
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird-api-coverage" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ApiCoverage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Meituan-Dianping/lyrebird-tracking" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Tracking
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lyrebird/plugins/" aria-current="page" class="sidebar-link">插件</a></li><li><a href="/lyrebird/plugins/android.html" class="sidebar-link">Android插件</a></li><li><a href="/lyrebird/plugins/ios.html" class="sidebar-link">iOS插件</a></li><li><a href="/lyrebird/plugins/tracking.html" class="sidebar-link">埋点插件</a></li><li><a href="/lyrebird/plugins/api-coverage.html" class="sidebar-link">API覆盖率插件</a></li><li><a href="/lyrebird/plugins/bugit.html" aria-current="page" class="active sidebar-link">BugIt插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lyrebird/plugins/bugit.html#快速开始" class="sidebar-link">快速开始</a></li><li class="sidebar-sub-header"><a href="/lyrebird/plugins/bugit.html#功能介绍" class="sidebar-link">功能介绍</a></li><li class="sidebar-sub-header"><a href="/lyrebird/plugins/bugit.html#bug脚本说明" class="sidebar-link">Bug脚本说明</a></li><li class="sidebar-sub-header"><a href="/lyrebird/plugins/bugit.html#脚本高级" class="sidebar-link">脚本高级</a></li><li class="sidebar-sub-header"><a href="/lyrebird/plugins/bugit.html#示例脚本" class="sidebar-link">示例脚本</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="bugit插件"><a href="#bugit插件" class="header-anchor">#</a> BugIt插件</h1> <p>BugIt 是一个Issue提交的插件，目前应用于提交Bug场景下。</p> <p>配合其他插件，BugIt提供了一种准确、快捷、有效的Issue生成服务。除填写Issue配置字段外，BugIt还提供Lyrebird中<a href="/lyrebird/checker/">检查器</a>(<a href="/lyrebird/checker/">Checker</a>)与其他<a href="/lyrebird/plugins/" class="router-link-active">插件</a>(<a href="/lyrebird/plugins/android.html">Android</a>、<a href="/lyrebird/plugins/ios.html">iOS</a>)数据。</p> <p>通过脚本配置，可支持任意Bug管理系统。</p> <h2 id="快速开始"><a href="#快速开始" class="header-anchor">#</a> 快速开始</h2> <h3 id="环境要求"><a href="#环境要求" class="header-anchor">#</a> 环境要求</h3> <ul><li><p>macOS OR Linux</p></li> <li><p>Python3.6及以上</p></li> <li><p>Lyrebird 1.6及以上</p></li></ul> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>pip3 <span class="token function">install</span> lyrebird-bugit
</code></pre></div><h3 id="载入脚本文件"><a href="#载入脚本文件" class="header-anchor">#</a> 载入脚本文件</h3> <p>BugIt workplace 配置由<a href="/lyrebird/guide/config.html">Lyrebird配置文件</a>统一管理。</p> <p>通过修改 ~/.lyrebird/conf.json 中 &quot;bugit.workspace&quot; 的值，可以修改 BugIt 读取脚本文件的路径。</p> <p>对脚本的新增、修改、删除，可以在该目录下操作文件。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>使用BugIt时，必须有一个及以上的脚本文件</p></div> <p>配置脚本请参考<a href="#%E7%A4%BA%E4%BE%8B%E8%84%9A%E6%9C%AC">示例脚本</a>。</p> <h2 id="功能介绍"><a href="#功能介绍" class="header-anchor">#</a> 功能介绍</h2> <h3 id="bug提交"><a href="#bug提交" class="header-anchor">#</a> Bug提交</h3> <p>读取脚本文件后，BugIt会得到一个Bug信息填充的界面，称之为Bug表单。</p> <p>用户可以自定义Bug字段的 名称、先后顺序、填写样式、默认值。</p> <p><img src="/lyrebird/assets/img/bugit_bug.8ac1c65c.png" alt=""></p> <p>BugIt可以通过配置服务向任意Bug管理系统提交Issue</p> <h3 id="api数据获取"><a href="#api数据获取" class="header-anchor">#</a> API数据获取</h3> <p>BugIt支持自动填充Lyrebird运行过程中抓取到的数据信息。</p> <p><img src="/lyrebird/assets/img/bugit_api.83caee20.gif" alt=""></p> <h3 id="报警获取"><a href="#报警获取" class="header-anchor">#</a> 报警获取</h3> <p>在<a href="/lyrebird/checker/">检查器</a>(<a href="/lyrebird/checker/">Checker</a>)捕获报警后，可以通过通知中心随时跳转至BugIt。</p> <p>在右侧数据面板中，可以对历史<a href="/lyrebird/advance/eventbus.html">消息总线</a>中的信息进行回溯，补充至Bug中。</p> <p><img src="/lyrebird/assets/img/bugit_alert.d0d96e68.gif" alt=""></p> <h3 id="缓存功能"><a href="#缓存功能" class="header-anchor">#</a> 缓存功能</h3> <p>按下[Commond]+[s]键，会将Bug相关字段信息进行存储。</p> <p>缓存信息不受Lyrebird服务开关、浏览器缓存、脚本/界面切换的影响。</p> <p><img src="/lyrebird/assets/img/bugit_cache.8e74a4a7.gif" alt=""></p> <p>有效的利用缓存功能，是提高Bug上报效率的关键。</p> <h3 id="插件在bugit中的应用"><a href="#插件在bugit中的应用" class="header-anchor">#</a> 插件在Bugit中的应用</h3> <h4 id="android-ios插件"><a href="#android-ios插件" class="header-anchor">#</a> Android iOS插件</h4> <p>安装<a href="/lyrebird/plugins/android.html">Android插件</a>、<a href="/lyrebird/plugins/ios.html">iOS插件</a>后，BugIt支持设备信息扩展服务。</p> <ul><li>设备信息获取
<ul><li>BugIt 支持将设备名称、设备系统版本、被测 App 信息（Bundle ID(iOS)/PackageName(Android)）填充到Issue内容中。</li></ul></li> <li>实时设备截图
<ul><li>BugIt 可以实时获取设备截图，并支持在截图上进行涂鸦、文本标记。</li> <li>提交 Bug 时，截图将作为附件一并提交给脚本配置服务。</li></ul></li> <li>Crash Log 获取
<ul><li>在Lyrebird运行过程中，如发生 被测 App 发生 Crash，BugIt 会捕获到 Crash Log。</li> <li>提交 Bug 时，Crash Log 将作为附件一并提交给脚本配置服务。</li> <li>Crash 获取 暂不支持 iOS 设备</li></ul></li></ul> <p><img src="/lyrebird/assets/img/bugit_devices.0a618f3f.gif" alt=""></p> <h2 id="bug脚本说明"><a href="#bug脚本说明" class="header-anchor">#</a> Bug脚本说明</h2> <p>BugIt通过加载配置脚本提供向Bug管理系统提交Issue的功能</p> <h3 id="脚本示意图"><a href="#脚本示意图" class="header-anchor">#</a> 脚本示意图</h3> <p><img src="/lyrebird/assets/img/bugit_callback.dfdba2a3.png" alt=""></p> <p>配置脚本需包含以下三部分</p> <ul><li><a href="#init%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">init配置文件</a></li> <li><a href="#form">form()</a></li> <li><a href="#submit">submit()</a></li></ul> <h3 id="bugit数据传递"><a href="#bugit数据传递" class="header-anchor">#</a> BugIt数据传递</h3> <p>context 用于存储 BugIt 运行过程中产生的数据信息。<a href="#form">form()</a>、<a href="#submit">submit()</a>方法依赖于这些数据信息实现Bug信息的展示与提交</p> <p>context关键字说明</p> <table><thead><tr><th style="text-align:center;">key</th> <th style="text-align:left;">说明</th> <th style="text-align:center;">使用场景</th></tr></thead> <tbody><tr><td style="text-align:center;">cache</td> <td style="text-align:left;">存储Bug缓存信息，详细用法请参考<a href="#bug%E4%BF%A1%E6%81%AF%E7%BC%93%E5%AD%98">Bug信息缓存</a></td> <td style="text-align:center;">form()</td></tr> <tr><td style="text-align:center;">issue</td> <td style="text-align:left;">存储Bug表单信息</td> <td style="text-align:center;">issue()</td></tr> <tr><td style="text-align:center;">key</td> <td style="text-align:left;">存储最近一次提交成功的Issue key</td> <td style="text-align:center;">issue()、attachments()</td></tr> <tr><td style="text-align:center;">attachments</td> <td style="text-align:left;">存储需要上报的附件信息</td> <td style="text-align:center;">attachments()</td></tr></tbody></table> <h3 id="init配置文件"><a href="#init配置文件" class="header-anchor">#</a> init配置文件</h3> <p>BugIt 通过 name 来标识配置文件。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>BugIt 脚本必须含有 'name' 属性</p></div> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
Template name
&quot;&quot;&quot;</span>        
name <span class="token operator">=</span> <span class="token string">'TEST-JIRA'</span>
</code></pre></div><p>name 用于在 BugIt 前端页面上展示脚本名称。</p> <p><img src="/lyrebird/assets/img/bugit_name.c6edc48e.png" alt=""></p> <p>选中配置文件后，BugIt init 脚本文件，获取脚本文件中回调方法(<a href="#form">form()</a>、<a href="#submit">submit()</a>)。</p> <h3 id="form"><a href="#form" class="header-anchor">#</a> form()</h3> <p>form() 方法用于自定义Bug表单的字段与填写样式。</p> <p>Bug 中的每一字段由一dict定义（通常称之为FormItem），表单配置时，通过dict的以下关键字去控制字段的名称、默认值、样式等内容。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>form()方法应返回一由FormItem组成的list。</p></div> <h4 id="formitem-dict说明"><a href="#formitem-dict说明" class="header-anchor">#</a> FormItem dict说明</h4> <table><thead><tr><th style="text-align:center;">key</th> <th style="text-align:left;">说明</th> <th style="text-align:center;">枚举值</th> <th style="text-align:center;">是否必填</th></tr></thead> <tbody><tr><td style="text-align:center;">name</td> <td style="text-align:left;">展示在页面上的字段名称</td> <td style="text-align:center;">--</td> <td style="text-align:center;">Y</td></tr> <tr><td style="text-align:center;">value</td> <td style="text-align:left;">对应字段填充的值</td> <td style="text-align:center;">--</td> <td style="text-align:center;">N</td></tr> <tr><td style="text-align:center;">component</td> <td style="text-align:left;">字段展示的组件形式</td> <td style="text-align:center;">'input'、'select'、'compoundTextarea'</td> <td style="text-align:center;">Y</td></tr> <tr><td style="text-align:center;">options</td> <td style="text-align:left;">配合 select component使用，用于存放select component的选项内容</td> <td style="text-align:center;">--</td> <td style="text-align:center;">N</td></tr></tbody></table> <h4 id="bugit-支持的-component"><a href="#bugit-支持的-component" class="header-anchor">#</a> BugIt 支持的 component</h4> <ul><li>input</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>form_item_input <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'主题'</span><span class="token punctuation">,</span>
    <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
    <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'defalut value'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA/AAAABGCAYAAABrJH/7AAAKyGlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUk9kSgO///+mFFoiAlNCbIEUggJTQQ5FebYQkkFBiTAgqNkQWV2BFUREBdQWXIgquBZC1IBZsi6Ii9g2yqKjrYsGGyvuBR9h977z3zpucOffLZO7M3HvmnjMBgErgiMUZsAoAmaIsSWSANyM+IZGBHwAQIAAlYAtMOVypmBUeHgJQmVr/Lu9vo96o3LQej/Xvv/9XUeXxpVwAoHCUk3lSbibKR1F9xRVLsgBA9qF2o2VZ4nG+iLK6BC0Q5QfjnDrJw+OcPMEYzIRPdKQPypoAECgcjiQVAIoxamdkc1PROBRflG1FPKEIZfQ78OAKODyU0bxgVmbmknGWo2ye/Jc4qX+LmayIyeGkKnjyLBNC8BVKxRmcFf/ndfxvycyQTeUwRZUikARGoisdvbM76UuCFSxKnhc2xULehP8EC2SBMVPMlfokTjGP4xus2JsxL2SKU4T+bEWcLHb0FPOlflFTLFkSqciVIvFhTTFHMp1Xlh6jsAv4bEX8HEF03BRnC2PnTbE0PSp42sdHYZfIIhX180UB3tN5/RVnz5T+5bxCtmJvliA6UHF2znT9fBFrOqY0XlEbj+/rN+0To/AXZ3krcokzwhX+/IwAhV2aHaXYm4U25PTecMUdpnGCwqcY+AI/EIJ+GCAc2ANnYAccQQQAWfzl4z0KfJaIV0iEqYIsBgt9ZXwGW8S1mcWwt7VzAWD8zU62xNs7E28RohOmbWI0vgva80jNtC1ZG4BWtI+0iNM24zoAlOMBaMnlyiTZk7bx5wSwgASUgTrQAnrACJgDa7Q+J+AGvNCKg0AYiAYJYBHgAgHIBBKwDKwC60ABKAKbwXZQAfaAGlAPDoLDoBWcAGfABXAFXAe94D6Qg0HwAgyD92AUgiA8RIVokBakD5lAVpA9xIQ8ID8oBIqEEqAkKBUSQTJoFbQeKoJKoQpoL9QA/Qwdh85Al6Ae6C7UDw1Bb6DPMAJTYHVYFzaFZ8NMmAUHw9HwQjgVXgrnwPnwJrgcroYPwC3wGfgK3AvL4RfwCAIQMkJHDBBrhIn4IGFIIpKCSJA1SCFShlQjTUg70oXcROTIS+QTBoehYRgYa4wbJhATg+FilmLWYIoxFZh6TAvmHOYmph8zjPmGpWJ1sFZYVywbG49NxS7DFmDLsLXYY9jz2F7sIPY9Doej48xwzrhAXAIuDbcSV4zbhWvGdeB6cAO4ETwer4W3wrvjw/AcfBa+AL8TfwB/Gn8DP4j/SCAT9An2BH9CIkFEyCOUEfYTThFuEJ4SRokqRBOiKzGMyCOuIJYQ9xHbideIg8RRkirJjOROiialkdaRyklNpPOkB6S3ZDLZkOxCjiALybnkcvIh8kVyP/kTRY1iSfGhLKDIKJsodZQOyl3KWyqVakr1oiZSs6ibqA3Us9RH1I9KNCUbJbYST2mtUqVSi9INpVfKRGUTZZbyIuUc5TLlI8rXlF+qEFVMVXxUOCprVCpVjqv0qYyo0lTtVMNUM1WLVferXlJ9poZXM1XzU+Op5avVqJ1VG6AhNCOaD41LW0/bRztPG1THqZups9XT1IvUD6p3qw9rqGnM0YjVWK5RqXFSQ05H6KZ0Nj2DXkI/TL9N/zxDdwZrBn/GxhlNM27M+KA5U9NLk69ZqNms2av5WYuh5aeVrrVFq1XroTZG21I7QnuZ9m7t89ovZ6rPdJvJnVk48/DMezqwjqVOpM5KnRqdqzojunq6Abpi3Z26Z3Vf6tH1vPTS9LbpndIb0qfpe+gL9bfpn9Z/ztBgsBgZjHLGOcawgY5BoIHMYK9Bt8GooZlhjGGeYbPhQyOSEdMoxWibUafRsLG+cajxKuNG43smRBOmicBkh0mXyQdTM9M40w2mrabPzDTN2GY5Zo1mD8yp5p7mS82rzW9Z4CyYFukWuyyuW8KWjpYCy0rLa1awlZOV0GqXVc8s7CyXWaJZ1bP6rCnWLOts60brfhu6TYhNnk2rzavZxrMTZ2+Z3TX7m62jbYbtPtv7dmp2QXZ5du12b+wt7bn2lfa3HKgO/g5rHdocXs+xmsOfs3vOHUeaY6jjBsdOx69Ozk4SpyanIWdj5yTnKuc+pjoznFnMvOiCdfF2WetywuWTq5Nrluth1z/drN3S3fa7PZtrNpc/d9/cAXdDd477Xne5B8MjyeNHD7mngSfHs9rzsZeRF8+r1uspy4KVxjrAeuVt6y3xPub9wcfVZ7VPhy/iG+Bb6Nvtp+YX41fh98jf0D/Vv9F/OMAxYGVARyA2MDhwS2AfW5fNZTewh4Ocg1YHnQumBEcFVwQ/DrEMkYS0h8KhQaFbQx/MM5knmtcaBsLYYVvDHoabhS8N/yUCFxEeURnxJNIuclVkVxQtanHU/qj30d7RJdH3Y8xjZDGdscqxC2IbYj/E+caVxsnjZ8evjr+SoJ0gTGhLxCfGJtYmjsz3m799/uACxwUFC24vNFu4fOGlRdqLMhadXKy8mLP4SBI2KS5pf9IXThinmjOSzE6uSh7m+nB3cF/wvHjbeEN8d34p/2mKe0ppyrNU99StqUMCT0GZ4KXQR1ghfJ0WmLYn7UN6WHpd+lhGXEZzJiEzKfO4SE2ULjq3RG/J8iU9YitxgVi+1HXp9qXDkmBJrRSSLpS2Zamjw9FVmbnsO1l/tkd2ZfbHZbHLjixXXS5afnWF5YqNK57m+Of8tBKzkruyc5XBqnWr+lezVu9dA61JXtO51mht/trB3IDc+nWkdenrfs2zzSvNe7c+bn17vm5+bv7AdwHfNRYoFUgK+ja4bdjzPeZ74ffdGx027tz4rZBXeLnItqis6Esxt/jyD3Y/lP8wtillU3eJU8nuzbjNos23t3huqS9VLc0pHdgaurVlG2Nb4bZ32xdvv1Q2p2zPDtIO2Q55eUh5207jnZt3fqkQVPRWelc2V+lUbaz6sIu368Zur91Ne3T3FO35/KPwxzt7A/a2VJtWl9XgarJrnuyL3df1E/Onhlrt2qLar3WiOnl9ZP25BueGhv06+0sa4UZZ49CBBQeuH/Q92NZk3bS3md5cdAgckh16/nPSz7cPBx/uPMI80nTU5GjVMdqxwhaoZUXLcKugVd6W0NZzPOh4Z7tb+7FfbH6pO2FwovKkxsmSU6RT+afGTuecHukQd7w8k3pmoHNx5/2z8WdvnYs4130++PzFC/4Xznaxuk5fdL944pLrpeOXmZdbrzhdabnqePXYr46/Hut26m655nyt7brL9faeuT2nbnjeOHPT9+aFW+xbV3rn9fbcjrl9p29Bn/wO786zuxl3X9/Lvjd6P/cB9kHhQ5WHZY90HlX/ZvFbs9xJfrLft//q46jH9we4Ay9+l/7+ZTD/CfVJ2VP9pw3P7J+dGPIfuv58/vPBF+IXoy8L/lD9o+qV+aujf3r9eXU4fnjwteT12Jvit1pv697Nedc5Ej7y6H3m+9EPhR+1PtZ/Yn7q+hz3+enosi/4L+VfLb62fwv+9mAsc2xMzJFwJkYBBFU4JQWAN+icQE0AgHYdANL8yZl6QqDJ/wETBP4TT87dE+IEQE0HANG5AISg6050NUVV2QuAcFSjvQDs4KDQf4o0xcF+Mha5FR1NysbG3qLzI94CgK99Y2OjrWNjX2vRYu8B0PF+cpYfF5UDAHidZNq5hPRmHcwF/yL/AFo7ETVYtV+hAAAACXBIWXMAABYlAAAWJQFJUiTwAAAYJklEQVR4Ae3dCXRURbrA8S9kIxDCToCERXYEQUBBXEABBYWH4A7qoD5nfC4P5/FmGJdhZJTnNj4XhlFAxQUFRUVREQFxAUFAQcQFQZF9CwQCCQlJs0x9JbftTrpJd7o73c351zmxt7p16/66OcfvVtVXCcdMEQoCCCCAAAIIIIAAAggggAACCMS0QJWY7h2dQwABBBBAAAEEEEAAAQQQQAABK0AAzw8BAQQQQAABBBBAAAEEEEAAgTgQIICPgy+JLiKAAAIIIIAAAggggAACCCCQBEHsCuTtz5eCgkIpcbmEVAWx+z3RMwQQQAABBBBAAAEEEEDAUyAhIUFSkpMlPb2a1KpZw/OjkJ4nkMQuJL+IHOxyHZZdOblSXFISkfZpFAEEEEAAAQQQQAABBBBAoHIEUlNSJLNBXUlODn38nAC+cr6zoM6yddsuG7ynpqZI7VoZUi2tqugdHAoCCCCAAAIIIIAAAggggEDsC+gM6sKiQ7Iv74AUF5eIBvHZWZkhd5w18CEThrcBnTavI+8avGc1aiDVq6URvIeXmNYQQAABBBBAAAEEEEAAgYgK6ACsxnIa02lspzGexnqhFgL4UAXDfLyuedeiI++MuocZl+YQQAABBBBAAAEEEEAAgUoU0JhOYzstTqwXyukJ4EPRi8CxmrBOi06bpyCAAAIIIIAAAggggAACCMS3gBPbObFeKFdDAB+KXgSOdbLNM/oeAVyaRAABBBBAAAEEEEAAAQQqWcCJ7ZxYL5TTE8CHosexCCCAAAIIIIAAAggggAACCFSSAAF8JUFzGgQQQAABBBBAAAEEEEAAAQRCESCAD0WPYxFAAAEEEEAAAQQQQAABBBCoJAEC+EqC5jQIIIAAAggggAACCCCAAAIIhCJAAB+KHscigAACCCCAAAIIIIAAAgggUEkCSZV0nqBOo5vcL1q8QlJSkqXXOWcEdSyVEUAAAQQQQAABBBBAAAEEEDgZBWIygE9KTJRpb34giVWqyHlndxMn7X4wX8C336+TDz/63O8hDRvUk+uHDZZ/TZ4ugezH16dXD+l8Wlu/7cXjB3n786W4uEQyG9QNW/cPmfZ+XPuL5OzOlQb168rpndoF3XZhYZHszz8o9evWlqSkxKCPj5cD8vIOSHGJK6z+8XLt9BMBBBBAAAEEEEAAAQSCF4jJAD7RBPD9zj9L3nxnnmgg3qlj8IFzzp698sXybyQ7K1PSq1f3klm/YbM0zW5k3/t69RobxDoVSlyHxeVySbW0ql43Dk7r0MapctI8vvDK27Jy1Q8y9dmHw3JNP63fJI8+OUVy9+bZ9s7s2rFCAfzCJStk8gtvyJOP3OX+nsLSwRhr5PmpM2X1d+vkpUkPxljP6A4CCCCAAAIIIIAAAgjEokBMBvAKdeEFPeWtWfPlk0XLKxTAO9gjhl0q3bp0cF7axz+MHOt+/dyE+93P9YkGtR/MW2iDKr2RQAlM4NixYzJh0jR70+PRB/7XBt4lZnSZggACCCCAAAIIIIAAAgggEB6BqAXwc+Yvco/U+ruUjBrpsitnr7zy+nv+qtj3a9fKkIH9e/uss/9AgezJ3ef12dGjR92vXWbEfc/xEWN9c8PGrVK3Ti3J2fPbMalmLX6d2jXdx/CkrMBu47Vl204ZMfxSadWiqa2gOQwoCCCAAAIIIIAAAggggAAC4RGIWgD/ycLl8vMvm8u9iv0H8uXHdb+csF7zpll+A/gJk6f5PFaDfi2btmyX0WP+v0yd20c94H6v46mt5f5773C/5klZAV3zriWc6+nLnqVi76z7eZNs3LxN+vY+SxIT2XihYoochQACCCCAAAIIIIAAAtEWiFoAP+qOESaBV8kJr3/co5PkyJEjct/dt52wXkpKit/PdUS4XZsWXp8/8sRzXq/1xaAB50ubVs3KvP/8yzPLvMcbZQWcRIDJSVH7SZXt1PF3ln35jbz9/gK7o0Fiov/fit8G+AABBBBAAAEEEEAAAQQQiAGBqEVbDTPrlXv5TgbyZk0al1vXX4XsxpnStnVzr4+TfASZ7du2kJ7dO8uKr7+XNWbEf/iVA6WKyYL/6oz3vY7lBQIIIIAAAggggAACCCCAAALREIhaAF9ZF/vqjNny3pxPvU6n6+JrZqR7vee8+MZkBX//w0/lmssvMQG88278PuqWbL+Ydf06hdx1+Ii0aJYtuiQgkKnk+8w2Z7rMYcvWnaI3XHRte4P6dbwwtu3Ikfz8AltHP9B18NWrp9mbH21aNXfX1X5sNMsVduzcLfv2HbBT7buefqpUr5bmrnOiJ5okb+1PG6S2yUWQaban81V+XLdBatWsYfuqn2tWfJ3B4eQ4WGeOd9blNzG7EPg79wHz+9i+M8fmQqhfz/t6nfM6dTLNdoTOcgz9LNTrPGictmzdIdmNG0p6ejXndO7HokPFssl8l40bZUpGDe/dFZxK27bvkvUbtkjuvv3S3Nz8atWyqdRI913XOYZHBBBAAAEEEEAAAQQQiH2BkzaAr1endpns887X0aljG2kUwAwAp348PmrAO//jJfLy9HelsOiQCdgTRZP36ft67Xfccq3fyzpy5KjZwm+uvDlrngmAj9qg18kof1Hfc+TG64ZI6vFlC6+9+YEsXvq1uy09nxb9fPoL/7Dnm2f68cpr74kGpzqrQYv2RYPKO2+9TjSQL69o/Xv+/pRd6nDT9UN9Vh8zbrz06dVDbr35Gvv5g489K5pDwSljH3raeSp/HX2LdO3s+7y6l/2994+X9mbpxbi/jXQf4/lkmrnueQsWy+MPjbYBvLqG4zp/Xr9Z/v7w03LXqJule7fTPE9pn2vwrg7/c/vv5Lyzu3l9fiD/oEya8rrdPlE/SE5Otlsi6k2LG4YPkQEXnutVnxcIIIAAAggggAACCCAQXwInbQDf+bS2on8VLQkJFT0yNo7TPcY/mLtQdP/6664eJJro7+ixo7L+ly02q/8DjzxjRtN9j2Q/PuFFWfrlaulvgvVLB/axo+UFBYWycPFX9tidZhR97D232wu99qpBto6Ofk8x57zxuqGiyxESjgPm7c+XGTM/lA7tW8mVQy6Spk0aSVFRsXxh1qW/8fZcefKZqTLhH/dKhp8ZEaFo/u2uW+0I/Gzj8NnnX8q4MSPdI/CNG9b327TOMujSub2sXPWD7Ni1p8zNHr2Z8fkXK03OhObWVRuK5nXq+Q+ZkfnRYx4TDeJvuv4y6WWCezXdk5snM9+dL5NffEPyDx4030F/rU5BAAEEEEAAAQQQQACBOBSIagC/10zxLTKjw/6KTn8+YkZedUqwv5KWVrXMFm/LvlotmuW+vNLylCY2UPOsl19QIGlVU+2Itef78fT8uzU/y5x5i6THGZ1k9B9vcgfTeg2ntmsp//e3O+Wx8S+akdpVZaaRf7H8GzuCe/2wwTJ0UF/3Zet07kv695KqxkYz++uxPbuf7p6ufsBMo9eigbGzjZy+1unlTz1yt9d0cB0Z1psD+v1rEP/9jz/btrR+OMspzbJsc3WO7zjQwnzfVVMDS2Kn/dMA/lPzOxp25SVe3dLfl06V79/vHPf70bxO7YRutZhrtkN84K8jTdLGU9z9qle3lvzhxivlUHGxvDVrvlxwXnepV7e2+3OeIIAAAggggAACCCCAQPwIRDWAn/rau2Zk9Ktytf77zw/6rXN2j9PlTyNv9Ppc11iX3qIuv+CgnbZdM6OGu25aWmqZAD5n917xt+7ZfWCMP5lt1vBXqZIgN4+43Ct4d7qto+O3mKBu1eo1zlvuxw/mLbTXP8SMvPsqF/TqLs+9/JYsWrIy4KDb11pubVuTBmoAv3Wb/xs0vvpQGe91M9P6Nfj9ZNEyueaKi70cP164TNKrV5NzenTx6kq0rvOwyW0wd8ESObdnN6/g3bNzAy/qJZ8u+lKWf/WtvRHj+RnPEUAAAQQQQAABBBBAID4EohrA6xreU0xSNX9FRwx1BP6qof6n/TZu1KDM4brWV/90XbIzlVu3pNMRyice/otXfc9AX0f8NQlb29a/jWB6VY6TFxs2bZNGZiS8bp1afnus06tbmqR0G0yCO8+y0Rxby4xYz3z3I8+3vZ7r+nZ1CqZoUjXN8P+TSYq3J3efFJt15s66eg1AY63oWv1+5/eU196aI6tNYkNnOYb2XV8P7N/bPR3fs+/RuM6t23fapQJ6k0r/zfgqOgKvJdjvzVdbvIcAAggggAACCCCAAALREYhqAK9JxPwlElOOOfMXiQZ3gy+5IGgdnXY/6p5H5b/+82o7bdhfA7VqZtj2der3CjNlWtd6dzmtnU1+pnuaaxCnWdXjpehNC71R0aF963K7XN9MpfYM4HUdtSaaSzCj956J6Uo3pNPFdSp9IMXlOmwT6enIfkaNdLMmv7WcdWZnM4KdZhPkvfjqO4E0U24dTXJ39OixcusFU6HfBT3lDZPMT0fcnQD+k0XL7Y2h/n3P9mqqsq7T180OXeeuZfOWHbJ3736vfnm+0DwIyclR/Sfv2R2eI4AAAggggAACCCCAQJACJ+3/zW81AbwGVbqe3Sm65nrK1Ledl3L15QPsNOkbrh1iM7X/c9KrNnN3TzMtf8y4f0pSYpJoIjTdmixeis440FkJ2832buWV0qOxGpTrqL1u0+Yv+3p5bZb+fKlJVjd77mdy8YXnye+GD3Znr9d6GngGG8A7I8mlz6PXojcvwlnqmC3rzujS0Sb00zXv1cyWd5pboaNJyJfVONPrVGG/TnMzxVfRIL10yT7eF13eMOwK7/X6pevyGgEEEEAAAQQQQAABBOJX4CTY6dw3vgbwWgoLf0uSV3CwUD78aJH7T0ectWgG8XGPTrT7pQ8Z1McmXrv6sotl245dZsuuJ2XX7lxbL17+07pFMztNXfdB91c2mT3ZN2zynj6vdTUB3br1G+3x/o4NJlBesmyVnWp+7VUDvYJ3bXvz1u3+TlHmfd0GTwNofyPMOnW93FKBAF8T1blcv2ad/2HtetlpstL371d2O7ZwXaeTjV/3cPdVfF1nZoO6NkngMrNzgG77568E8735a4P3EUAAAQQQQAABBBBAIHoCJ28Afzwxmm6ftfanjVa4aXYjmfHS4+4/TTr20rRZcusf7xfdBm2ACcycEcxzzuoi9919mw3u7xn7pGjAGy/lSpMzQNepT3z+dbutWOl+6w2L8RNf9RnsXXP5xWYkW2T8M69IcUlJ6UNt9vmRox864c4AngfpLgM6E8J1+LDn2/bcM2f9us7+mAQ2cp5lZhas/n6t/U48G9Ot0zQZnr+SejzzvNYLtnTu2NZuo6fT6D/+bJloEkTN7l+6hOs6G2bWMwkIq9ht6koH3Po7/nzpSntqz8901oVu57d56w6ZNuP90l2zr3WmwwPmJlWRn5F9nwfxJgIIIIAAAggggAACCMSUQOJYU2KqRx6d0anXuq452DXwGnhOmjJDWrVsardJm2NG3Y8cPSJVEqrYIN05RaIJlDRJmWZsv+Wmq0RH352kd1pHs9G3btVMPjPZuzWQ85Uwz2krXI/78g7YpnT6dkWLZkivXTtDFny21GQeX24DQr1+HT3WAPCpp6fa62xutlnLM+e7bHA/96l0uUBqSrJ89OlSWWz2Otct33R9+Xc//CSzZn9ivfRGSJ/ePbxG1Hfs2m32iV9h9x/3dCo2e6Z/ZZLXrf5urV2KoMH8Dz+ul4lTXjeBcT0z1X+3SWSYJV06tXf3QRMLaj4CTUTouWuAbgGnI91frvzOrqfXpIPffr9O/jV5ujQwo9C79+w1U9sbmjX23gF2wcEis6Z/pWiSNz2njmLrSHVNk8ivvKK/B735oFPndVaHjr536dSuzGEVuU7dim9XTq4M/Y/ftuvTvAuaw0CvX/tZzWyTqAn/dB97vRml0/e379wt3bp0kBbNs9390C0RNZ/BAnOTYY25GZWUlGhvwOjU/mkzZsvCJSvkzK4dRbPre/7G3Q3wBAEEEEAAAQQQQAABBCImEI44TzsXlTXwGkhpUFJe0SBLg0fN/F1eSTEjzhk1qttqujWdTpe/1GyF1rplM7l77BN2qzJd361BUfOmje0+7xrI3DXqZqlhRuJ1irav0qlDG5n41H2mzq9t+6oTi+/17X2WCfCayOQXZthZBuqoRa9TZxfcMPxSecGMym7w0Xl106n0z774pr0R4oz2anA/aEBvuf6awaadwCZv6H7qepPgnfc/lkeeeN6eTWcH6Hrt399whQ3AdUZAIOXcnl3tb+G1tz6Uxye8ZA/RQLWPuVbNY3Dz7WNER8JLl+7dOtrgVX8X+qff+59G3iBNshuWrurzdd9ePWT6G7NtQsWL+ngnr3MOCOd1jjDfjd400G3fNHO/Fv39XTV0gJzarqW9IVL6Op3f8twFi2XGzN989NhGZlT/jluGSx9zHRQEEEAAAQQQQAABBBCIX4EEE5wFNn85jNc4fuIrNjgJY5NmD+yuMuqOEbbJO//ykJQUu+TpJ8bYYE0zy788fZYdndTL1eBTs89rNnUd4dQp1vqnU5d1NF4fdVa3bmGn9Q+bYEpnAvz5zhsjPnrprHHWEdVwFd2uTadXawbzpiZo1bXkgRZN3qbH1jMZ6/WvoqXQBNa6M4BmQdcRfGtcwcb0enaYUeiDRUXSNKuRXf8dSFO6DKKoqFiamRs4nskNAzk20DrhvE69CaXJCDU4DzaDvCZs1NH9JlkNA/YJ9BqphwACCCCAAAIIIIAAAsEJhCvOi8oIfKcObQPehixQFifg1TW+OnKv06818NGia91v+/0wGTr4Qlm1eo1s2brTJqbTkWFNUKeJ7nTavTPi7+ueRnZWpru9QPsUK/VSzJR4HVGvSNFgv12bFhU51OsYvVGisyHCUfR6NAgPtjRrEvwxwZ4jnNepSyHatGoebBdsfV2CEcoyjAqdlIMQQAABBBBAAAEEEEAgogJRGYGP6BWZxnWKvo7wVg9ipNmzTxrAl95TXO8FhDJq7Nn+iZ6H687Mic7BZwgggAACCCCAAAIIIIAAApUnEK44Lyoj8JFmCnW9uo7cJyb+Onof6b7SPgIIIIAAAggggAACCCCAAAKBCASWiSyQlqiDAAIIIIAAAggggAACCCCAAAIREyCAjxgtDSOAAAIIIIAAAggggAACCCAQPgEC+PBZ0hICCCCAAAIIIIAAAggggAACERMggI8YLQ0jgAACCCCAAAIIIIAAAgggED4BAvjwWdISAggggAACCCCAAAIIIIAAAhETIICPGC0NI4AAAggggAACCCCAAAIIIBA+AQL48FmGpSXdwk6L7kVPQQABBBBAAAEEEEAAAQQQiG8BJ7ZzYr1QroYAPhS9CBybkpxsWy0sOhSB1mkSAQQQQAABBBBAAAEEEECgMgWc2M6J9UI5NwF8KHoRODY9vZptdV/eAUbhI+BLkwgggAACCCCAAAIIIIBAZQno6LvGdlqcWC+UcxPAh6IXgWNr1awhqSkpUlxcItt25MjBwiIC+Qg40yQCCCCAAAIIIIAAAgggECkBDdw1ltOYTmM7jfE01gu1JJiGWWwdqmKYj3e5DsuunFwpLikJc8s0hwACCCCAAAIIIIAAAgggUJkCGrxnNqgryclJIZ+WAD5kwsg1kLc/XwoKCqXE5WIUPnLMtIwAAggggAACCCCAAAIIhFVAE9bpmnedNh+OkXencwTwjgSPCCCAAAIIIIAAAggggAACCMSwAGvgY/jLoWsIIIAAAggggAACCCCAAAIIOAIE8I4EjwgggAACCCCAAAIIIIAAAgjEsAABfAx/OXQNAQQQQAABBBBAAAEEEEAAAUeAAN6R4BEBBBBAAAEEEEAAAQQQQACBGBYggI/hL4euIYAAAggggAACCCCAAAIIIOAIEMA7EjwigAACCCCAAAIIIIAAAgggEMMCBPAx/OXQNQQQQAABBBBAAAEEEEAAAQQcAQJ4R4JHBBBAAAEEEEAAAQQQQAABBGJYgAA+hr8cuoYAAggggAACCCCAAAIIIICAI0AA70jwiAACCCCAAAIIIIAAAggggEAMCxDAx/CXQ9cQQAABBBBAAAEEEEAAAQQQcAQI4B0JHhFAAAEEEEAAAQQQQAABBBCIYQEC+Bj+cugaAggggAACCCCAAAIIIIAAAo4AAbwjwSMCCCCAAAIIIIAAAggggAACMSxAAB/DXw5dQwABBBBAAAEEEEAAAQQQQMARIIB3JHhEAAEEEEAAAQQQQAABBBBAIIYFCOBj+MuhawgggAACCCCAAAIIIIAAAgg4Av8Gbi6cv9nLY7IAAAAASUVORK5CYII=" alt=""></p> <p>input 组件会生成一个文本输入框，在声明时如果 value 不为空，则会作为默认值填充在输入框中</p> <ul><li>select</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>form_item_select <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'版本'</span><span class="token punctuation">,</span>
    <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'select'</span><span class="token punctuation">,</span>
    <span class="token string">'options'</span><span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span><span class="token string">'001'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'option_1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span><span class="token string">'002'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'option_2'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'001'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt=""></p> <p>select组件会生成一个筛选框，筛选项由 options 定义，options 为一个 list，其中每一元素为 dict 类型。</p> <p>option dict说明</p> <table><thead><tr><th style="text-align:center;">key</th> <th style="text-align:left;">说明</th> <th style="text-align:center;">是否必填</th></tr></thead> <tbody><tr><td style="text-align:center;">id</td> <td style="text-align:left;">筛选项唯一标识</td> <td style="text-align:center;">Y</td></tr> <tr><td style="text-align:center;">name</td> <td style="text-align:left;">筛选项在前端展示文本内容</td> <td style="text-align:center;">Y</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>select 组件中，value应为option dict中对应 id 的值</p></div> <ul><li>compoundTextarea</li></ul> <p>compoundTextarea组件会生成一个文本框，在声明时如果 value 不为空，则会作为默认值填充在文本框中</p> <div class="language-python extra-class"><pre class="language-python"><code>form_item_text <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'描述'</span><span class="token punctuation">,</span>
    <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'compoundTextarea'</span><span class="token punctuation">,</span>
    <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'defalut value'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/lyrebird/assets/img/bugit_text.d316e8e4.png" alt=""></p> <p>compoundTextarea组件在 BugIt 中还用于支持 Lyrebird 其他信息的扩展。</p> <p>选择<a href="/lyrebird/advance/eventbus.html">消息总线</a>或<a href="#%E6%8F%92%E4%BB%B6%E5%9C%A8bugit%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8">其他插件</a>的数据时，该数据将作为附加信息展示在 compoundTextarea 中。</p> <p><img src="/lyrebird/assets/img/bugit_text_extra.54172e4b.gif" alt=""></p> <p>对应的数据信息将作为 'extraMsg' 存放在 FormItem中。
此时From Item变成</p> <div class="language-python extra-class"><pre class="language-python"><code>form_item_text <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'描述'</span><span class="token punctuation">,</span>
    <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'compoundTextarea'</span><span class="token punctuation">,</span>
    <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'defalut value'</span><span class="token punctuation">,</span>
    <span class="token string">'extraMsg'</span><span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token string">'message'</span><span class="token punctuation">:</span><span class="token string">'Flow Info'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'message'</span><span class="token punctuation">:</span><span class="token string">'Notice Info'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'message'</span><span class="token punctuation">:</span><span class="token string">'Devices Info'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="form-方法示例代码"><a href="#form-方法示例代码" class="header-anchor">#</a> form()方法示例代码</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">form</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    BugIt callback function

    BugIt will call this function when user select this template from UI.
    This function should return a array, list all FormItem dict.

    &quot;&quot;&quot;</span>
    form_item_input <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'主题'</span><span class="token punctuation">,</span>
        <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
        <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'defalut value'</span>
    <span class="token punctuation">}</span>
    form_item_select <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'版本'</span><span class="token punctuation">,</span>
        <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'select'</span><span class="token punctuation">,</span>
        <span class="token string">'options'</span><span class="token punctuation">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span><span class="token string">'001'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'option_1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span><span class="token string">'002'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'option_2'</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'001'</span>
    <span class="token punctuation">}</span>
    form_item_text <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'描述'</span><span class="token punctuation">,</span>
        <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'compoundTextarea'</span><span class="token punctuation">,</span>
        <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'defalut value'</span>
    <span class="token punctuation">}</span>
    form <span class="token operator">=</span> <span class="token punctuation">[</span>form_item_input<span class="token punctuation">,</span>form_item_select<span class="token punctuation">,</span>form_item_text<span class="token punctuation">]</span>
    <span class="token keyword">return</span> form
</code></pre></div><p>示例代码生成的 Bug 表单如下图所示
<img src="/lyrebird/assets/img/bugit_form.6ca7e363.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>form()方法入参 <a href="#bugit%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92">context</a> ，可用于传递缓存数据，相关用法详见<a href="#bug%E4%BF%A1%E6%81%AF%E7%BC%93%E5%AD%98">Bug信息缓存</a></p></div> <h3 id="submit"><a href="#submit" class="header-anchor">#</a> submit()</h3> <p>submit()方法用于向bug系统上提交Issue，生成Bug。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>submit()方法返回一组用于处理 submit 行为的方法。</p></div> <p>方法说明</p> <table><thead><tr><th style="text-align:center;">方法名</th> <th style="text-align:center;">入参</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:center;">issue</td> <td style="text-align:center;">context</td> <td style="text-align:left;">处理 Bug表单中的信息，通过 API 向 Bug 管理系统提交 Issue</td></tr> <tr><td style="text-align:center;">attachments</td> <td style="text-align:center;">context</td> <td style="text-align:left;">处理附件信息（如 <a href="/lyrebird/plugins/android.html">Android插件</a>、<a href="/lyrebird/plugins/ios.html">iOS插件</a>提供的截图或 Log），通过 API 向 创建的 Issue 中添加附件</td></tr></tbody></table> <h4 id="submit-方法示例代码-以jira服务为例"><a href="#submit-方法示例代码-以jira服务为例" class="header-anchor">#</a> submit()方法示例代码（以JIRA服务为例）</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    BugIt callback function

    BugIt will call this function when user tap submit button.
    This function should return a array, contains all submit actions.

    Each submit-action function have a argument. It contains form data and attachments info.
    &quot;&quot;&quot;</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>issue<span class="token punctuation">,</span> attachments<span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">issue</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    This function is used to submit Issue 
    &quot;&quot;&quot;</span>
    form_data <span class="token operator">=</span> context<span class="token punctuation">[</span><span class="token string">'issue'</span><span class="token punctuation">]</span>
    jira_fields <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment"># transform from_data to payload submited to API of JIRA</span>
    <span class="token keyword">for</span> form_item <span class="token keyword">in</span> form_data<span class="token punctuation">:</span>
        <span class="token keyword">if</span> form_item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'主题'</span> <span class="token punctuation">:</span>
            jira_fields<span class="token punctuation">[</span><span class="token string">'summary'</span><span class="token punctuation">]</span> <span class="token operator">=</span> form_item<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span>
        <span class="token keyword">elif</span> form_item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'版本'</span><span class="token punctuation">:</span>
            jira_fields<span class="token punctuation">[</span><span class="token string">'version'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token builtin">id</span><span class="token punctuation">:</span>form_item<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
        <span class="token keyword">elif</span> form_item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'描述'</span><span class="token punctuation">:</span>
            jira_fields<span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span> <span class="token operator">=</span> form_item<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span>
            <span class="token comment"># add extraMsg to description </span>
            <span class="token keyword">if</span> form_item<span class="token punctuation">[</span><span class="token string">'extraMsg'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> add_des <span class="token keyword">in</span> form_item<span class="token punctuation">[</span><span class="token string">'extraMsg'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                    jira_fields<span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span> <span class="token operator">+=</span><span class="token string">'\n'</span>
                    jira_fields<span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span> <span class="token operator">+=</span><span class="token string">'------------------------------\n'</span>
                    jira_fields<span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span> <span class="token operator">+=</span>add_des<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span>

    url <span class="token operator">=</span> <span class="token string">'http://www.example.com/jira/rest/api/2/issue'</span>
    header <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json;charset=utf-8'</span>
    <span class="token punctuation">}</span>
    resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> auth<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'YOUR JIRA_USER_NAME'</span><span class="token punctuation">,</span> <span class="token string">'YOUR_JIRA_PASSWD'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>json<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;fields&quot;</span><span class="token punctuation">:</span> jira_fields<span class="token punctuation">}</span><span class="token punctuation">,</span>headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> resp<span class="token punctuation">.</span>status_code <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token keyword">and</span> resp<span class="token punctuation">.</span>status_code <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">:</span>
        body <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        <span class="token keyword">if</span> body<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>
            context<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> body<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Submit failed </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Create issue failed with code </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">}</span></span><span class="token string">\n</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">attachments</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    This function is used to upload attachments to the Issue which has been created
    &quot;&quot;&quot;</span>
    key <span class="token operator">=</span> context<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span>
    attachments <span class="token operator">=</span> context<span class="token punctuation">[</span><span class="token string">'attachments'</span><span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>attachments<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token comment"># No attachments</span>
        <span class="token keyword">return</span>

    url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'http://www.example.com/jira/rest/api/2/issue/</span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">/attachments'</span></span>
    headers <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'X-Atlassian-Token'</span><span class="token punctuation">:</span> <span class="token string">'nocheck'</span>
    <span class="token punctuation">}</span>
    multiple_files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token comment"># transform attachment data to payload submited to API of JIRA</span>
    <span class="token keyword">for</span> attachment <span class="token keyword">in</span> attachments<span class="token punctuation">:</span>
        attachment_path <span class="token operator">=</span> Path<span class="token punctuation">(</span>attachment<span class="token punctuation">[</span><span class="token string">'path'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        multiple_files<span class="token punctuation">.</span>append<span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>attachment_path<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>attachment_path<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> files<span class="token operator">=</span>multiple_files<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

    <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span> <span class="token keyword">and</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'code'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Submit attachments success'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Submit failed </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</code></pre></div><h2 id="脚本高级"><a href="#脚本高级" class="header-anchor">#</a> 脚本高级</h2> <h3 id="bug表单动态化配置"><a href="#bug表单动态化配置" class="header-anchor">#</a> Bug表单动态化配置</h3> <p>在提交Bug场景中，Bug表单的配置可能会由于项目结构的调整而发生变化。配置脚本的频繁变更会带来额外的工作量及不稳定因素。</p> <p>针对此问题，可以采用动态化配置Bug表单的方法使 BugIt 更加灵活。</p> <p>以以<a href="https://www.atlassian.com/software/jira/" target="_blank" rel="noopener noreferrer">JIRA<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>服务为例，我们可以通过 API 实时地获取到 Bug 表单所需要的字段及格式。在 form() 方法中对API返回表单数据进行组装，返回符合 form() 预期结果的 list</p> <h4 id="示例代码"><a href="#示例代码" class="header-anchor">#</a> 示例代码</h4> <div class="language-python extra-class"><pre class="language-python"><code>
PROJECT_KEY <span class="token operator">=</span> <span class="token string">'TEST'</span>
ISSUE_TYPE_ID <span class="token operator">=</span> <span class="token string">'10'</span>

<span class="token keyword">def</span> <span class="token function">get_fields_metadata_from_JIRA_API</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    Get origin fields by JIRA Rest API
    projecKeys: Set your project key
    issueTypeId: Set your issue type id
    expand: projects.issuetypes.fields
    &quot;&quot;&quot;</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>
        <span class="token string-interpolation"><span class="token string">f'http://http://www.example.com/jira/rest/api/2/issue/createmeta?projectKeys=</span><span class="token interpolation"><span class="token punctuation">{</span>PROJECT_KEY<span class="token punctuation">}</span></span><span class="token string">&amp;issuetypeIds=</span><span class="token interpolation"><span class="token punctuation">{</span>ISSUE_TYPE_ID<span class="token punctuation">}</span></span><span class="token string">&amp;expand=projects.issuetypes.fields'</span></span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
    fields <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">'projects'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'issuetypes'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'fields'</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> fields

<span class="token keyword">def</span> <span class="token function">make_options</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    Make options of FormItem when field is select component
    &quot;&quot;&quot;</span>
    <span class="token keyword">for</span> option <span class="token keyword">in</span> field<span class="token punctuation">[</span><span class="token string">'allowedValues'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token string">'name'</span> <span class="token keyword">not</span> <span class="token keyword">in</span> option<span class="token punctuation">:</span>
            option<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> option<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> field<span class="token punctuation">[</span><span class="token string">'allowedValues'</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">make_item</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> field<span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> component<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    Make origin field from JIRA to FieldItem
    key: JIRA field key
    name: Displayed as the FormItem name
    schema: JIRA field schema
    &quot;&quot;&quot;</span>
    schema <span class="token operator">=</span> field<span class="token punctuation">[</span><span class="token string">'schema'</span><span class="token punctuation">]</span>
    item <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>key<span class="token operator">=</span>key<span class="token punctuation">,</span> name<span class="token operator">=</span>field<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> required<span class="token operator">=</span>field<span class="token punctuation">[</span><span class="token string">'required'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> schema<span class="token operator">=</span>schema<span class="token punctuation">)</span>
    <span class="token keyword">if</span> value<span class="token punctuation">:</span>
        item<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token keyword">if</span> <span class="token string">'allowedValues'</span> <span class="token keyword">in</span> field<span class="token punctuation">:</span>
        item<span class="token punctuation">[</span><span class="token string">'component'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'select'</span>
        item<span class="token punctuation">[</span><span class="token string">'options'</span><span class="token punctuation">]</span> <span class="token operator">=</span> make_options<span class="token punctuation">(</span>field<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        item<span class="token punctuation">[</span><span class="token string">'component'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'input'</span>
    <span class="token keyword">if</span> component<span class="token punctuation">:</span>
        item<span class="token punctuation">[</span><span class="token string">'component'</span><span class="token punctuation">]</span> <span class="token operator">=</span> component
    <span class="token keyword">return</span> item

<span class="token keyword">def</span> <span class="token function">form</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    jira_fields <span class="token operator">=</span> get_fields_metadata_from_JIRA_API<span class="token punctuation">(</span><span class="token punctuation">)</span>
    custom_fields <span class="token operator">=</span> OrderedDict<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">'描述'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'compoundTextarea'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    required_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> field_key <span class="token keyword">in</span> origin_fields<span class="token punctuation">:</span>
        field <span class="token operator">=</span> origin_fields<span class="token punctuation">[</span>field_key<span class="token punctuation">]</span>
        <span class="token keyword">if</span> field<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token keyword">in</span> custom_fields<span class="token punctuation">:</span>
            custom_fields<span class="token punctuation">[</span>field<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span>make_item<span class="token punctuation">(</span>
                field_key<span class="token punctuation">,</span>
                field<span class="token punctuation">,</span>
                component<span class="token operator">=</span>custom_fields<span class="token punctuation">[</span>field<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'component'</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> field<span class="token punctuation">[</span><span class="token string">'required'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            required_fields<span class="token punctuation">.</span>append<span class="token punctuation">(</span>make_item<span class="token punctuation">(</span>field_key<span class="token punctuation">,</span> field<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
    form <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">*</span><span class="token builtin">list</span><span class="token punctuation">(</span>custom_fields<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span>required_fields<span class="token punctuation">]</span>
    <span class="token keyword">return</span> form
</code></pre></div><h3 id="bug信息缓存"><a href="#bug信息缓存" class="header-anchor">#</a> Bug信息缓存</h3> <p>在form()方法中，利用<a href="#bugit%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92">context</a>可以实现数据缓存功能</p> <h4 id="示例代码-2"><a href="#示例代码-2" class="header-anchor">#</a> 示例代码</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">form</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    form <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
    <span class="token comment"># Your code to make form</span>

    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    get cache if it exsit
    field value will be filled with cache value
    &quot;&quot;&quot;</span>
    <span class="token keyword">if</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'cache'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> field <span class="token keyword">in</span> form<span class="token punctuation">:</span>
            <span class="token keyword">for</span> cache_field <span class="token keyword">in</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'cache'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> cache_field<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span> <span class="token operator">==</span> field<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                    field<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cache_field<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> form
</code></pre></div><h2 id="示例脚本"><a href="#示例脚本" class="header-anchor">#</a> 示例脚本</h2> <p>此示例脚本以<a href="https://www.atlassian.com/software/jira/" target="_blank" rel="noopener noreferrer">JIRA<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>服务为例</p> <div class="language-python extra-class"><pre class="language-python"><code>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
Template name
&quot;&quot;&quot;</span>
name <span class="token operator">=</span> <span class="token string">'TEST-JIRA'</span>

<span class="token keyword">def</span> <span class="token function">form</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    BugIt callback function

    BugIt will call this function when user select this template from UI.
    This function should return a array, list all FormItem dict.

    &quot;&quot;&quot;</span>
    form_item_input <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'主题'</span><span class="token punctuation">,</span>
        <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
        <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'defalut value'</span>
    <span class="token punctuation">}</span>
    form_item_select <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'版本'</span><span class="token punctuation">,</span>
        <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'select'</span><span class="token punctuation">,</span>
        <span class="token string">'options'</span><span class="token punctuation">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span><span class="token string">'001'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'option_1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span><span class="token string">'002'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'option_2'</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'001'</span>
    <span class="token punctuation">}</span>
    form_item_text <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'描述'</span><span class="token punctuation">,</span>
        <span class="token string">'component'</span><span class="token punctuation">:</span> <span class="token string">'compoundTextarea'</span><span class="token punctuation">,</span>
        <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'defalut value'</span>
    <span class="token punctuation">}</span>
    form <span class="token operator">=</span> <span class="token punctuation">[</span>form_item_input<span class="token punctuation">,</span>form_item_select<span class="token punctuation">,</span>form_item_text<span class="token punctuation">]</span>

    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    get cache if it exsit
    field value will be filled with cache value
    &quot;&quot;&quot;</span>
    <span class="token keyword">if</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'cache'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> field <span class="token keyword">in</span> form<span class="token punctuation">:</span>
            <span class="token keyword">for</span> cache_field <span class="token keyword">in</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'cache'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> cache_field<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span> <span class="token operator">==</span> field<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                    field<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cache_field<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> form


<span class="token keyword">def</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    BugIt callback function

    BugIt will call this function when user tap submit button.
    This function should return a array, contains all submit actions.

    Each submit-action function have a argument. It contains form data and attachments info.
    &quot;&quot;&quot;</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>issue<span class="token punctuation">,</span> attachments<span class="token punctuation">]</span>


<span class="token keyword">def</span> <span class="token function">issue</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    This function is used to submit Issue 
    &quot;&quot;&quot;</span>
    form_data <span class="token operator">=</span> context<span class="token punctuation">[</span><span class="token string">'issue'</span><span class="token punctuation">]</span>
    jira_fields <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment"># transform from_data to payload submited to API of JIRA</span>
    <span class="token keyword">for</span> form_item <span class="token keyword">in</span> form_data<span class="token punctuation">:</span>
        <span class="token keyword">if</span> form_item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'主题'</span> <span class="token punctuation">:</span>
            jira_fields<span class="token punctuation">[</span><span class="token string">'summary'</span><span class="token punctuation">]</span> <span class="token operator">=</span> form_item<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span>
        <span class="token keyword">elif</span> form_item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'版本'</span><span class="token punctuation">:</span>
            jira_fields<span class="token punctuation">[</span><span class="token string">'version'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token builtin">id</span><span class="token punctuation">:</span>form_item<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
        <span class="token keyword">elif</span> form_item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'描述'</span><span class="token punctuation">:</span>
            jira_fields<span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span> <span class="token operator">=</span> form_item<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> form_item<span class="token punctuation">[</span><span class="token string">'extraMsg'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> add_des <span class="token keyword">in</span> form_item<span class="token punctuation">[</span><span class="token string">'extraMsg'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                    jira_fields<span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span> <span class="token operator">+=</span><span class="token string">'\n'</span>
                    jira_fields<span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span> <span class="token operator">+=</span><span class="token string">'------------------------------\n'</span>
                    jira_fields<span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span> <span class="token operator">+=</span>add_des<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span>

    url <span class="token operator">=</span> <span class="token string">'http://www.example.com/jira/rest/api/2/issue'</span>
    header <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json;charset=utf-8'</span>
    <span class="token punctuation">}</span>
    resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> auth<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'YOUR JIRA_USER_NAME'</span><span class="token punctuation">,</span> <span class="token string">'YOUR_JIRA_PASSWD'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>json<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;fields&quot;</span><span class="token punctuation">:</span> jira_fields<span class="token punctuation">}</span><span class="token punctuation">,</span>headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> resp<span class="token punctuation">.</span>status_code <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token keyword">and</span> resp<span class="token punctuation">.</span>status_code <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">:</span>
        body <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        <span class="token keyword">if</span> body<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>
            context<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> body<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Submit failed </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Create issue failed with code </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">}</span></span><span class="token string">\n</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">attachments</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    This function is used to upload attachments to the Issue which has been created
    &quot;&quot;&quot;</span>
    key <span class="token operator">=</span> context<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span>
    attachments <span class="token operator">=</span> context<span class="token punctuation">[</span><span class="token string">'attachments'</span><span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>attachments<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token comment"># No attachments</span>
        <span class="token keyword">return</span>

    url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'http://www.example.com/jira/rest/api/2/issue/</span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">/attachments'</span></span>
    headers <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'X-Atlassian-Token'</span><span class="token punctuation">:</span> <span class="token string">'nocheck'</span>
    <span class="token punctuation">}</span>
    multiple_files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token comment"># transform attachment data to payload submited to API of JIRA</span>
    <span class="token keyword">for</span> attachment <span class="token keyword">in</span> attachments<span class="token punctuation">:</span>
        attachment_path <span class="token operator">=</span> Path<span class="token punctuation">(</span>attachment<span class="token punctuation">[</span><span class="token string">'path'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        multiple_files<span class="token punctuation">.</span>append<span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>attachment_path<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>attachment_path<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> files<span class="token operator">=</span>multiple_files<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

    <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span> <span class="token keyword">and</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'code'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Submit attachments success'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Submit failed </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</code></pre></div><h3 id="jira-api-reference"><a href="#jira-api-reference" class="header-anchor">#</a> JIRA API Reference</h3> <ul><li><a href="https://docs.atlassian.com/software/jira/docs/api/REST/7.6.1/#api/2/issue-getCreateIssueMeta" target="_blank" rel="noopener noreferrer">JIRA get create issue meta<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.atlassian.com/software/jira/docs/api/REST/7.6.1/#api/2/issue-createIssue" target="_blank" rel="noopener noreferrer">JIRA create issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.atlassian.com/software/jira/docs/api/REST/7.6.1/#api/2/issue/%7BissueIdOrKey%7D/attachments-addAttachment" target="_blank" rel="noopener noreferrer">JIRA add attachment<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lyrebird/plugins/api-coverage.html" class="prev">
        API覆盖率插件
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lyrebird/assets/js/app.e12009e3.js" defer></script><script src="/lyrebird/assets/js/2.d6802a1a.js" defer></script><script src="/lyrebird/assets/js/4.987bc5f7.js" defer></script>
  </body>
</html>
